<!DOCTYPE html>
<html>
<head>
    <title>Combining Boxes</title>
    <style>
        .box {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: move;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
        }

        #box1 {
            background-color: #3498db;
            left: 100px;
            top: 100px;
        }

        #box2 {
            background-color: #e74c3c;
            left: 300px;
            top: 100px;
        }

        .combined-box {
            background-color: #9b59b6;
        }
    </style>
</head>
<body>
    <div id="box1" class="box">Box 1</div>
    <div id="box2" class="box">Box 2</div>

    <script>
        const boxes = document.querySelectorAll('.box');
        let activeBox = null;
        let offsetX, offsetY;

        // Drag functionality
        boxes.forEach(box => {
            box.addEventListener('mousedown', startDragging);
        });

        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDragging);

        function startDragging(e) {
            activeBox = e.target;
            offsetX = e.clientX - activeBox.offsetLeft;
            offsetY = e.clientY - activeBox.offsetTop;
        }

        function drag(e) {
            if (activeBox) {
                activeBox.style.left = (e.clientX - offsetX) + 'px';
                activeBox.style.top = (e.clientY - offsetY) + 'px';
                checkCollision();
            }
        }

        function stopDragging() {
            activeBox = null;
        }

        function checkCollision() {
            const box1 = document.getElementById('box1');
            const box2 = document.getElementById('box2');

            if (!box1 || !box2) return; // If boxes have been removed

            const rect1 = box1.getBoundingClientRect();
            const rect2 = box2.getBoundingClientRect();

            if (rect1.left < rect2.right &&
                rect1.right > rect2.left &&
                rect1.top < rect2.bottom &&
                rect1.bottom > rect2.top) {
                combineBoxes(box1, box2);
            }
        }

        function combineBoxes(box1, box2) {
            // Create new combined box
            const combinedBox = document.createElement('div');
            combinedBox.className = 'box combined-box';
            combinedBox.textContent = 'Combined!';
            
            // Position at the middle point between the two boxes
            const x = (box1.offsetLeft + box2.offsetLeft) / 2;
            const y = (box1.offsetTop + box2.offsetTop) / 2;
            combinedBox.style.left = x + 'px';
            combinedBox.style.top = y + 'px';

            // Add drag functionality to new box
            combinedBox.addEventListener('mousedown', startDragging);

            // Remove original boxes and add combined box
            box1.remove();
            box2.remove();
            document.body.appendChild(combinedBox);
        }
    </script>
</body>
</html>
